from aiogram import Router
from aiogram.filters import Command
from aiogram.types import Message

router = Router()


@router.message(Command("antiscam"))
async def cmd_antiscam(message: Message) -> None:
    await message.answer(
        "–ê–Ω—Ç–∏—Å–∫–∞–º-–±–ª–æ–∫ üí°\n\n"
        "1Ô∏è‚É£ –ù–∏–∫–æ–º—É –Ω–µ —Å–æ–æ–±—â–∞–π –∫–æ–¥—ã –∏–∑ SMS –∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.\n"
        "2Ô∏è‚É£ –ë–∞–Ω–∫ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ—Å–∏—Ç –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏ ¬´–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å—á—ë—Ç¬ª.\n"
        "3Ô∏è‚É£ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –∑–≤—É—á–∏—Ç —Å–ª–∏—à–∫–æ–º —Ö–æ—Ä–æ—à–æ, —á—Ç–æ–±—ã –±—ã—Ç—å –ø—Ä–∞–≤–¥–æ–π ‚Äî —ç—Ç–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –æ–±–º–∞–Ω.\n\n"
        "–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –∞–Ω—Ç–∏—Å–∫–∞–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.",
    )


@router.message(Command("check"))
async def cmd_check(message: Message) -> None:
    parts = (message.text or "").split(maxsplit=1)
    if len(parts) < 2:
        await message.answer(
            "–û—Ç–ø—Ä–∞–≤—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–∫:\n"
            "<code>/check –¢–µ–±–µ –æ–¥–æ–±—Ä–µ–Ω –∫—Ä–µ–¥–∏—Ç –ø–æ–¥ 0%...</code>",
        )
        return

    text_to_check = parts[1]

    # –î–ª—è MVP –¥–µ–ª–∞–µ–º –ø—Ä–æ—Å—Ç—É—é —ç–≤—Ä–∏—Å—Ç–∏–∫—É, –ø–æ–∑–∂–µ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞–Ω—Ç–∏—Ñ—Ä–æ–¥-—Å–µ—Ä–≤–∏—Å / AI.
    suspicious_keywords = ["0%", "–±—ã—Å—Ç—Ä—ã–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫", "–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å", "–±–µ–∑ —Ä–∏—Å–∫–∞", "—Å–µ–∫—Ä–µ—Ç–Ω–∞—è —Å—Ö–µ–º–∞"]
    lowered = text_to_check.lower()
    score = sum(1 for kw in suspicious_keywords if kw in lowered)

    if score >= 2:
        verdict = "‚ö†Ô∏è –ü–æ—Ö–æ–∂–µ –Ω–∞ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ. –ù–µ –ø–µ—Ä–µ—Ö–æ–¥–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–≤–æ–¥–∏."
    elif score == 1:
        verdict = "‚ùì –ï—Å—Ç—å —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏. –ë—É–¥—å –æ—Å—Ç–æ—Ä–æ–∂–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä—å –∏—Å—Ç–æ—á–Ω–∏–∫."
    else:
        verdict = "‚úÖ –Ø –Ω–µ –Ω–∞—à—ë–ª —è–≤–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω."

    await message.answer(
        "<b>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</b>\n\n"
        f"–¢–µ–∫—Å—Ç:\n<code>{text_to_check}</code>\n\n"
        f"–û—Ü–µ–Ω–∫–∞: {verdict}",
    )


